<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable Content</title>
    <style>
        #audioContainer {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: white;
            z-index: 9999;
            padding: 10px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        #audioContent {
            margin-top: 50px;
        }
        
        .editable {
            border: 1px solid #ddd;
            padding: 5px;
            margin-bottom: 10px;
        }
        
        #speedIndicator {
            margin-left: 10px;
        }

        #offsetInput {
            width: 40px; /* Новый стиль для поля ввода */
            padding: 5px; /* Добавление внутреннего отступа */
            margin-right: 10px; /* Добавление правого внешнего отступа */
        }

        button {
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="audioContainer">
        <audio id="audioPlayer" controls>
            <source src="https://github.com/IgorGeraskin22/transribe/raw/gh-pages/1.mp3">
            Ваш браузер не поддерживает аудиоэлемент.
        </audio>
        <button onclick="skip(-2)">⏪</button>
        <button onclick="skip(2)">⏩</button>
        <button onclick="changeSpeed(-0.1)">Уменьшить скорость</button>
        <button onclick="changeSpeed(0.1)">Увеличить скорость</button>
        <span id="speedIndicator">Скорость: 1.0x</span>

        <!-- Добавленные элементы в разметке -->
        <input type="number" id="offsetInput" value="0">
        <button onclick="updateOffset(1)">Время вперед</button>
        <button onclick="updateOffset(-1)">Время назад</button>
    </div>

    <div id="audioContent">
        <div class="editable" contenteditable="true" id="editableText">
            <br />
			
			
			
			
            Сюда вставляешь код из output.txt - D:\1.Scripts_Python\pythonProject в Pycharm
			
			
			
			
			
			
       </div>
        <button onclick="saveContent()">Сохранить</button>
    </div>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const editableText = document.getElementById('editableText');
        const speedIndicator = document.getElementById('speedIndicator');

        audioPlayer.onerror = function() {
            alert('Произошла ошибка при воспроизведении аудио.');
        };

        function skip(time) {
            audioPlayer.currentTime += time;
        }

        function jumpToTime(seconds) {
            const offset = parseFloat(document.getElementById('offsetInput').value) || 0;
            const startTime = seconds + offset;
            const hours = Math.floor(startTime / 3600);
            const minutes = Math.floor((startTime % 3600) / 60);
            const remainingSeconds = startTime % 60;

            const formattedTime = `${padZero(hours)}:${padZero(minutes)}:${padZero(remainingSeconds)}`;
            
            audioPlayer.oncanplay = function() {
                audioPlayer.play();
                console.log(`Jumping to time: ${formattedTime} (with offset: ${offset})`);
            };
            
            audioPlayer.currentTime = startTime;
        }

        function padZero(num) {
            return num.toString().padStart(2, '0');
        }

        function saveContent() {
            localStorage.setItem('editableContent', editableText.innerHTML);
            alert('Текст сохранен локально!');
        }

        function changeSpeed(amount) {
            audioPlayer.playbackRate += amount;
            speedIndicator.textContent = `Скорость: ${audioPlayer.playbackRate.toFixed(1)}x`;
        }

        function updateOffset(amount) {
            const offsetInput = document.getElementById('offsetInput');
            offsetInput.value = parseFloat(offsetInput.value) + amount;
            jumpToTime(audioPlayer.currentTime); // Применяем новое смещение времени сразу
        }

        window.onload = function() {
            const storedContent = localStorage.getItem('editableContent');
            if (storedContent) {
                editableText.innerHTML = storedContent;
            }
        }
    </script>
</body>
</html>

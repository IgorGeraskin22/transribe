<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable Content</title>
    <style>
        #audioContainer {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: white;
            z-index: 9999;
            padding: 10px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        #audioContent {
            margin-top: 50px;
        }
        
        .editable {
            border: 1px solid #ddd;
            padding: 5px;
            margin-bottom: 10px;
        }
        
        #speedIndicator {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div id="audioContainer">
        <audio id="audioPlayer" controls>
            <source src="https://github.com/IgorGeraskin22/transribe/raw/gh-pages/1.mp3">
            Ваш браузер не поддерживает аудиоэлемент.
        </audio>
        <button onclick="skip(-2)">Назад</button>
        <button onclick="skip(2)">Вперёд</button>
        <button onclick="changeSpeed(-0.1)">Уменьшить скорость</button>
        <button onclick="changeSpeed(0.1)">Увеличить скорость</button>
        <span id="speedIndicator">Скорость: 1.0x</span>

        <!-- Добавленные элементы в разметке -->
        <input type="number" id="offsetInput" value="0">
		<button onclick="decreaseOffset()">Время назад</button>
        <button onclick="increaseOffset()">Время вперед</button>
        
    </div>

    <div id="audioContent">
        <div class="editable" contenteditable="true" id="editableText">
            <br />
			
		
       <p></p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(0)">0:00:00</a>  Не пойму в чем дело. Сегодня опять обзванивал еще.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(6)">0:00:06</a>  Вот как.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(9)">0:00:09</a>  Да. Удалось тут кое-какие деньги привлечь, поэтому платеж смогу сделать на этой неделе.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(15)">0:00:15</a>  Хорошо. Какую сумму оплатите?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(17)">0:00:17</a>  Ну, тысяч пятьдесят семьдесят.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(20)">0:00:20</a>  Поняла. Поняла. Я с твоей стороны подумаю, пока чай смогу вам здесь помочь.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(27)">0:00:27</a>  Хорошо.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(28)">0:00:28</a>  Как счет оплатите? Наверное, сейчас я уточню, может быть, можно проверовать на эту сумму, сейчас узнаю. Будете оплачивать с карты или же как просто переводом, как обычно?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(42)">0:00:42</a>  Ну, с юрлица. С юрлица.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(45)">0:00:45</a>  Да. Поняла. Поняла. В общем, тогда так, давайте. Как сможете оплатить, вы мне напишите, мы вам сделаем счет. Хорошо. После оплаты пришлется мне подтверждение, и я с руководителем тоже переговорю на этот момент. Возможно, здесь что-то придумаем по поводу дальнейшего проведения. Хорошо. Как получается, что по менеджерам-то?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(71)">0:01:11</a>  Ну, вот человек просто не приехал подписывать договор, вообще пропал куда. Ну, как обычно, со связи пропадают, и все. Не пойму я, то ли я как это... Какой еще секрет надо знать, чтобы удаленного менеджера нанять.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(90)">0:01:30</a>  Сложно, Лобченко. Анкеты не запрашивали еще у Ирины для обзвона?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(95)">0:01:35</a>  Да смысла нет, потому что, в принципе, анкет... Ну, у меня же открыт зарплата РУ, доступ. Там анкет новых хватает, есть куда звонить.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(107)">0:01:47</a>  Поняла, Алексей. Какая помощь нужна, Малек, сейчас?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(113)">0:01:53</a>  Что еще?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(114)">0:01:54</a>  Какая нужна помощь, Малек, сейчас?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(116)">0:01:56</a>  Да пока не нужно никакой помощи особо. Илья Сергеевич обещал мне контактом отменяться, ну, дать контакт человеку какого-то, который руководителем дела продаж хорошо набрал людей, и мог что-то посоветовать, но чего-то нет пока.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(133)">0:02:13</a>  Напомнить ему еще разок.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(135)">0:02:15</a>  Хорошо, напомню.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(136)">0:02:16</a>  Давайте с вами запланируем встречу на этой неделе. Давайте. Как так удобно. Давайте на четверг. Смотрите, сегодня на завтрак, свободно, давайте на четверг. На четверг, допустим, на... Какой половина дня, в первую или второй?</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(153)">0:02:33</a>  Ну, мне кажется, лучше в первой.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(156)">0:02:36</a>  В первой. Можно на 10, можно на 11, на 12, пока ничего не занято.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(160)">0:02:40</a>  Давайте на 11.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(163)">0:02:43</a>  Хорошо. Хорошо. Все, на 11 записала вас. Пришлю тогда сейчас приглашение.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(173)">0:02:53</a>  Хорошо.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(174)">0:02:54</a>  Хорошо. В общем, держите в курсе меня по поводу оплаты. Как сможете оплатить, пишите. Обязательно. Я тогда вам пришлю.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(181)">0:03:01</a>  В ориентировочном, в среду.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(182)">0:03:02</a>  Хорошо. Хорошо. Все, тогда пишите, я на связи.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">КОЗЮКОВ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(186)">0:03:06</a>  Всего хорошего.</p>
<p><span style="color: 000000; font-weight: bold;"><span class="name1">МАРИЯ</span></span>  <a href="javascript:void(0);" onclick="jumpToTime(187)">0:03:07</a>  Всего доброго. До свидания.</p>
<p></p>




	   </div>
        <button onclick="saveContent()">Сохранить</button>
    </div>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const editableText = document.getElementById('editableText');
        const speedIndicator = document.getElementById('speedIndicator');

        function skip(time) {
            audioPlayer.currentTime += time;
        }

        function jumpToTime(seconds) {
            const offset = parseFloat(document.getElementById('offsetInput').value) || 0;
            const startTime = seconds + offset;
            const hours = Math.floor(startTime / 3600);
            const minutes = Math.floor((startTime % 3600) / 60);
            const remainingSeconds = startTime % 60;

            const formattedTime = `${padZero(hours)}:${padZero(minutes)}:${padZero(remainingSeconds)}`;
            audioPlayer.currentTime = startTime;
            
            setTimeout(() => {
                audioPlayer.play();
                console.log(`Jumping to time: ${formattedTime} (with offset: ${offset})`);
            }, 2000);
        }

        function padZero(num) {
            return num.toString().padStart(2, '0');
        }

        function saveContent() {
            localStorage.setItem('editableContent', editableText.innerHTML);
            alert('Текст сохранен локально!');
        }

        function changeSpeed(amount) {
            audioPlayer.playbackRate += amount;
            speedIndicator.textContent = `Скорость: ${audioPlayer.playbackRate.toFixed(1)}x`;
        }

        function increaseOffset() {
            const offsetInput = document.getElementById('offsetInput');
            offsetInput.value = parseFloat(offsetInput.value) + 1;
        }

        function decreaseOffset() {
            const offsetInput = document.getElementById('offsetInput');
            offsetInput.value = parseFloat(offsetInput.value) - 1;
            jumpToTime(audioPlayer.currentTime); // Применяем новое смещение времени сразу
        }

        window.onload = function() {
            const storedContent = localStorage.getItem('editableContent');
            if (storedContent) {
                editableText.innerHTML = storedContent;
            }
        }
    </script>
</body>
</html>
